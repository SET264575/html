<!--
link to html file regarding each disease
expand ddx

enter abnormalities
order abnormalities by most important


split js from html

add differential diagnoses


get age and gender from labs
exclude certain diagnoses depending on gender and age

expand/collapse ddx
	add treeview - https://www.w3schools.com/howto/howto_js_treeview.asp
critical values
prioritize ddx

additional labs:
RBC morphology
urinalysis
ABG
-->


<html>
	<head>
		<title>
			Lab Analyzer
		</title>
		<style>
			input {
				width: 40px;
			}
			table,td {
				vertical-align: top;
			}
			hr {
				width: 80%;
				border: none;
				border-top: 3px solid blue;
				height: 20px;
			}
			.centered {
				margin: auto;
			}
		</style>
		<link rel="stylesheet" href = "style.css">
	</head>

<body>
	<div class="centered">
	<h4>This is a beta version.  Information provided is incomplete and possibly wrong. It can be used to suggest additional diagnoses or actions. <br>
		It should not be relied upon.  Functionality is subject to frequent changes and occasional breakage.</h4>
	</div>
	<hr>
	<table>
		<tr>
			<td  style = "width: 33%" class="centered">
				<p style="width: 200px" class="centered">
				Lab results can be bulk copied from Meditech using the lab summary under the "Activity" tab and then pasted into the box to the right.<br>
				The parser is very robust.  You can copy everything on the webpage with Ctrl-A and Ctrl-C and paste it here.</p><br>
			</td>
			<td style = "width: 33%" class = "centered">
				<textarea class="centered" id = "textarea" style="width: 200px; height: 200px" onchange = "parseLabs()"></textarea><br>
			</td>
			<td style = "width: 33%" class="centered">
				<div style="border: 1px solid black" class="centered">
					<h3>These buttons are for testing purposes.</h3>
					<button onclick="setTestValues(0)">Set Values Low</button><br>
					<button onclick="setTestValues(5000)">Set Values High</button><br>
				</div>
			</td>
		</tr>
	</table>
	<hr>
	<table>
		<td style = "width: 50px">
		</td>
		<td>
			<table>
				<tr>
					<td style = "column-span: 2; margin: auto">
						<h4>CMP</h4>
					</td>	
				<tr>
					<td>
						<label for = "sodium">Sodium</label>
					</td>
					<td>
						<input type = "text" id = "sodium"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "chloride" > Chloride </label>
					</td>
					<td>
						<input type = "text" id = "chloride"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "potassium" > Potassium</label>
					</td>
					<td>
						<input type = "text" id = "potassium"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "bicarb"> Bicarb</label>
					</td>
					<td>
						<input type = "text" id = "bicarb"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "BUN"> BUN</label>
					</td>
					<td>
						<input type = "text" id = "BUN"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "creatinine"> Creatinine</label>
					</td>
					<td>
						<input type = "text" id = "creatinine"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "glucose"> Glucose</label>
					</td>
					<td>
						<input type = "text" id = "glucose"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "AST">AST</label>
					</td>
					<td>
						<input type = "text" id = "AST"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "ALT">ALT</label>
					</td>
					<td>
						<input type = "text" id = "ALT"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "alkaline phosphatase">Alkaline Phosphatase</label>
					</td>
					<td>
						<input type = "text" id = "alkaline phosphatase"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "bilirubin">bilirubin</label>
					</td>
					<td>
						<input type = "text" id = "bilirubin"><br>
					</td>
				</tr>
		
				<tr>
					<td>
						<label for = "calcium">calcium</label>
					</td>
					<td>
						<input type = "text" id = "calcium"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "magnesium">magnesium</label>
					</td>
					<td>
						<input type = "text" id = "magnesium"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "phosphorus">Phosphorus</label>
					</td>
					<td>
						<input type = "text" id = "phosphorus"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "albumin">albumin</label>
					</td>
					<td>
						<input type = "text" id = "albumin"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "total protein">total protein</label>
					</td>
					<td>
						<input type = "text" id = "total protein"><br>
					</td>
				</tr>
			</table>
		</td>
		<td>
			<table>
				<tr>
					<td style = "column-span: 2; margin: auto">
						<h4>Other chemistries</h4>
					</td>	
				<tr>
				<tr>
					<td>
						<label for = "lipase">lipase</label>
					</td>
					<td>
						<input type = "text" id = "lipase"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "troponin">troponin</label>
					</td>
					<td>
						<input type = "text" id = "troponin"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Pro BNP">pro BNP</label>
					</td>
					<td>
						<input type = "text" id = "pro bnp"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "uric acid">Uric acid</label>
					</td>
					<td>
						<input type = "text" id = "uric acid"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "CK">CK</label>
					</td>
					<td>
						<input type = "text" id = "ck"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "procalcitonin">procalcitonin</label>
					</td>
					<td>
						<input type = "text" id = "procalcitonin"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "tsh">TSH</label>
					</td>
					<td>
						<input type = "text" id = "tsh"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "total thyroxine">total thyroxine</label>
					</td>
					<td>
						<input type = "text" id = "total thyroxine"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "ammonia">ammonia</label>
					</td>
					<td>
						<input type = "text" id = "ammonia"><br>
					</td>
				</tr>
								<tr>
					<td>
						<label for = "lactate">lactate</label>
					</td>
					<td>
						<input type = "text" id = "lactate"><br>
					</td>
				</tr>
			</table>
				<!-- CK, procalcitonin, bands, lactate, phosphorus, probnp, tsh, total thyroxine, pt, ptt, ammonia -->
		</td>
		<td style = "width: 40px"></td>
		<td>
			<table>
				<tr>
					<td style = "column-span: 2; margin: auto">
						<h4>CBC</h4>
					</td>	
				<tr>
				<tr>
					<td>
						<label for = "WBC">WBC</label>
					</td>
					<td>
						<input type = "text" id = "WBC"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "RBC">RBC</label>
					</td>
					<td>
						<input type = "text" id = "RBC"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Hgb">Hgb</label>
					</td>
					<td>
						<input type = "text" id = "Hgb"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Hct">Hct</label>
					</td>
					<td>
						<input type = "text" id = "Hct"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "platelets">Platelets</label>
					</td>
					<td>
						<input type = "text" id = "platelets"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "MCV">MCV</label>
					</td>
					<td>
						<input type = "text" id = "MCV"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Neutrophils">Abs neutrophils</label>
					</td>
					<td>
						<input type = "text" id = "Abs Neutrophils"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Immature Granulocytes">Abs Imm Gran</label>
					</td>
					<td>
						<input type = "text" id = "Abs Immature Granulocytes"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Bands">Abs Bands</label>
					</td>
					<td>
						<input type = "text" id = "Abs Bands"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Lymphocytes">Abs Lymphocytes</label>
					</td>
					<td>
						<input type = "text" id = "Abs Lymphocytes"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Monocytes">Abs Monocytes</label>
					</td>
					<td>
						<input type = "text" id = "Abs Monocytes"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Eosinophils">Abs Eosinophils</label>
					</td>
					<td>
						<input type = "text" id = "Abs Eosinophils"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Abs Basophils">Abs Basophils</label>
					</td>
					<td>
						<input type = "text" id = "Abs Basophils"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "NRBC">NRBC</label>
					</td>
					<td>
						<input type = "text" id = "NRBC"><br>
					</td>
				</tr>
				
				
			</table>
		</td>
		<td style = "width: 40px"></td>
		<td>
			<table>
				<tr>
					<td style = "column-span: 2; margin: auto">
						<h4>ABG</h4>
					</td>	
				<tr>
				<tr>
					<td>
						<label for = "pH">pH</label>
					</td>
					<td>
						<input type = "text" id = "pH"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "pCO2">pCO2</label>
					</td>
					<td>
						<input type = "text" id = "pCO2"><br>
					</td>
				</tr>	
				<tr>
					<td>
						<label for = "pO2">pO2</label>
					</td>
					<td>
						<input type = "text" id = "pO2"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "HCO3">HCO3</label>
					</td>
					<td>
						<input type = "text" id = "HCO3"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "BE">BE</label>
					</td>
					<td>
						<input type = "text" id = "BE"><br>
					</td>
				</tr>
				<tr>
				</tr>
				<tr>
					<td style = "column-span: 2">
						<h4>Coags</h4>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "pt">PT</label>
					</td>
					<td>
						<input type = "text" id = "pt"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "inr">INR</label>
					</td>
					<td>
						<input type = "text" id = "inr"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "ptt">PTT</label>
					</td>
					<td>
						<input type = "text" id = "ptt"><br>
					</td>
				</tr>
			</table>
		</td>
		<td style = "width: 40px"></td>
		<td>
			<table>
				<tr>
					<td style = "column-span: 2; margin: auto">
						<h4>UA</h4>
					</td>	
				<tr>
				<tr>
					<td>
						<label for = "Urine pH">Urine pH</label>
					</td>
					<td>
						<input type = "text" id = "urine ph"><br>
					</td>
				</tr>
				<tr>
					<td>
						<label for = "Urine spec grav">Specific gravity</label>
					</td>
					<td>
						<input type = "text" id = "Urine spec grav"><br>
					</td>
				</tr>
					<tr>
					<td>
						<label for = "Urine blood">Urine blood</label>
					</td>
					<td>
						<input type = "text" id = "Urine blood"><br>
					</td>
				</tr>
					<tr>
					<td>
						<label for = "Urine leuk esterase">Leukocyte esterase</label>
					</td>
					<td>
						<input type = "text" id = "Urine leuk esterase"><br>
					</td>
				</tr>
					<tr>
					<td>
						<label for = "Urine nitrate">Nitrate</label>
					</td>
					<td>
						<input type = "text" id = "Urine nitrate"><br>
					</td>
				</tr>
					<tr>
					<td>
						<label for = "Urine bilinogen">Urine bilinogen</label>
					</td>
					<td>
						<input type = "text" id = "Urine bilinogen"><br>
					</td>
				</tr>
					<tr>
					<td>
						<label for = "Urine RBC">Urine RBCs</label>
					</td>
					<td>
						<input type = "text" id = "Urine RBCs"><br>
					</td>
				</tr>
			</table>
		</tr>
	<tr><td></td><td></td><td></td><td></td><td>			<button onclick="calc()">Submit</button></td></tr>
	</table>
	<hr>
	<h3>Calculated Values</h3>
	<table>
		</tr>
		<td style = "width: 40px"></td>
		<td>
			<p id = "corrected sodium"></p>
			<p id = "corrected calcium"></p>
			<p id = "anion gap"></p>
			<p id = "BUN/Cr ratio"></p>
			<p id = "AST/ALT ratio"></p>
			<p id = "ANC"></p>
			<p id = "osmolality"></p>
			<p id = 'A/G ratio'></p>
			<p id = 'MELD'></p>
			<p id = 'ABG interpretation'></p>
		</td>

	</tr>

</td></tr>
</table><br><br><br><br>
<hr>
<h3>Lab abnormalities, Differential Diagnosis, and Suggestions</h3>
<table>
	<tr>
		<td>
			<pre id = "diseases"></pre><br><br>
			<pre id = "abnormalities"></pre><br><br>
			<pre id = "ddx"></pre><br>
		</td>
		<td>
			<pre id = "disease_suggestions"></pre><br>
			<pre id = "suggestions"></pre><br>
		</td>
	</tr>
</table>
<p id = "website" name = "website" width = "1000" height = "1000"></p>


		<script src = "labanalyzer2.js"></script>
		<script src = "tree.js"></script>
	</body>
</html>
