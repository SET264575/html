<html>
  <head>
    <title>Intubation</title>
  </head>
  <body>
    <h3>Intubation</h3>
    <h4>indication</h4>
    <input kind = "radio" name = "indication" value = "0" id = "indication" onchange = "copytext()">
    <label for = "0">respiratory failure</label><br>
    <input kind = "radio" name = "indication" value = "1" id = "indication" onchange = "copytext()">
    <label for = "1">airway protection</label><br>
<br>

    <h4>consent</h4>
    <input kind = "radio" name = "consent" value = "0" id = "consent" onchange = "copytext()">
    <label for = "0">Due to the patient's critical condition, consent could not be obtained.</label><br>
    <input kind = "radio" name = "consent" value = "1" id = "consent" onchange = "copytext()">
    <label for = "1">The patient provided verbal consent for the procedure.</label><br>
    <input kind = "radio" name = "consent" value = "2" id = "consent" onchange = "copytext()">
    <label for = "2">The risks, benefits and alternatives were discussed with the patient who provided written consent.</label><br>
<br>

    <h4>sedation</h4>
    <input kind = "radio" name = "sedation" value = "0" id = "sedation" onchange = "copytext()">
    <label for = "0">The patient was sedated with 20 mg of Etomidate and paralyzed with 150 mg of succinylcholine.</label><br>
    <input kind = "radio" name = "sedation" value = "1" id = "sedation" onchange = "copytext()">
    <label for = "1">The patient did not require sedation due to their mental status and paralyzed with 150 mg of succinylcholine.</label><br>
    <input kind = "radio" name = "sedation" value = "2" id = "sedation" onchange = "copytext()">
    <label for = "2">The patient did not require sedation or paralysis.</label><br>
<br>

    <label for="tube_size">Depth</label>
    <select id = "tube_size">
      <option>8.0</option>
      <option>7.5</option>
      <option>7.0</option>
      <option>6.5</option>
    </select><br>

    <label for="depth"></label>
    <select id = "depth">
      <option>23</option>
      <option>24</option>
      <option>25</option>
      <option>26</option>
    </select><br>

    <h4>secured_location</h4>
    <input kind = "radio" name = "secured_location" value = "0" id = "secured_location" onchange = "copytext()">
    <label for = "0">teeth</label><br>
    <input kind = "radio" name = "secured_location" value = "1" id = "secured_location" onchange = "copytext()">
    <label for = "1">lip</label><br>
<br>

    <h4>oxygen_saturation</h4>
    <input kind = "radio" name = "oxygen_saturation" value = "0" id = "oxygen_saturation" onchange = "copytext()">
    <label for = "0">improved</label><br>
    <input kind = "radio" name = "oxygen_saturation" value = "1" id = "oxygen_saturation" onchange = "copytext()">
    <label for = "1">remained stable</label><br>
<br>

    <br>

    <textarea id = "text" style = "width:  1000px; height: 200px;"></textarea><br>
    <script>
      function copytext(){
        var indication = getRadioButtonValue("indication");
        var consent = getRadioButtonValue("consent");
        var sedation = getRadioButtonValue("sedation");
        var tube_size = document.getElementById("tube_size").value;
        var depth = document.getElementById("depth").value;
        var secured_location = getRadioButtonValue("secured_location");
        var oxygen_saturation = getRadioButtonValue("oxygen_saturation");
        var t = "Procedure Note: Intubation\n";
        
        t = t + "Intubation was indicated for ";
        switch(indication){
          case "0":
            t = t + "respiratory failure. ";
            break;
          case "1":
            t = t + "airway protection. ";
            break;
        }

        switch(consent){
          case "0":
            t = t + "Due to the patient's critical condition, consent could not be obtained.";
            break;
          case "1":
            t = t + "The patient provided verbal consent for the procedure.";
            break;
          case "2":
            t = t + "The risks, benefits and alternatives were discussed with the patient who provided written consent.";
            break;
        }

        switch(sedation){
          case "0":
            t = t + "The patient was sedated with 20 mg of Etomidate and paralyzed with 150 mg of succinylcholine.";
            break;
          case "1":
            t = t + "The patient did not require sedation due to their mental status and paralyzed with 150 mg of succinylcholine.";
            break;
          case "2":
            t = t + "The patient did not require sedation or paralysis.";
            break;
        }
        t = t + " A " + tube_size + "cuffed ETT was placed through the vocal cords and secured at ";
        t = t + depth + "cm at the ";

        switch(secured_location){
          case "0":
            t = t + "teeth";
            break;
          case "1":
            t = t + "lip";
            break;
        }
        t = t + ". Tube placement was confirmed by visualizing the tube passing through the vocal cords, auscultation of the lungs ";
        t = t + "and epigastrium, fog in the tube, and capnography.  The patient's oxygen saturation ";
        
        switch(oxygen_saturation){
          case "0":
            t = t + "improved";
            break;
          case "1":
            t = t + "remained stable";
            break;
        }
        t = t + " after tube placement. ";
        t = t + "The patient tolerated the procedure well.  There were no complications. ";
        t = t + "Post-intubation x-ray showed the tube in proper location with the tip of the tube above the carina.";
        navigator.clipboard.writeText(t);
        document.getElementById("text").value = t;
      }
      function getRadioButtonValue(name){
        var ele = document.getElementsByName(name);
        for (let i = 0; i < ele.length; i++){
          if (ele[i].checked){
            return(ele[i].value);
          }
        }
        return(-1);
      }
    </script>
  </body>
</html>
