<html>
  <head>
    <title>Cardioversion</title>
    <link rel="stylesheet" href="procedure.css">
  </head>
  
  <body>
    <h3>Cardioversion</h3>
    
    <h4>Indication</h4>
    
    <label for="indication">Indication</label>
    <select id = "indication" onchange = "copytext()">
      <option value = "atrial fibrillation with rapid ventricular response, uncontrolled with medication">atrial fibrillation with rapid ventricular response, uncontrolled with medication</option>
      <option value = "patient preference for management of atrial fibrillation">patient preference for management of atrial fibrillation</option>
      <option value = "unstable atrial fibrillation with rapid ventricular response">unstable atrial fibrillation with rapid ventricular response</option>
      <option value = "unstable ventricular tachycardia">unstable ventricular tachycardia</option>
      <option value = "ventricular fibrillation">ventricular fibrillation</option>
    </select><br><br>
      
    <input type="checkbox" id = "anticoagulated" onchange = "copytext()">
    <label for = "anticoagulated">The patient had been consistently taking an oral anticoagulant for at least 3 weeks.</label><br><br>
    
    <input type = "radio" name = "sedation" value = "1" id = "1" onchange = "copytext()">
    <label for="1">Conscious sedation was used for the procedure.</label><br>
    <input type = "radio" name = "sedation" value = "2" id = "2" onchange = "copytext()">
    <label for = "2">Conscious sedation was not used for the procedure due to the instability of the patient.</label><br>
    <input type = "radio" name = "sedation" value = "3" id = "3" onchange = "copytext()">
    <label for = "3">Conscious sedation was not used for the procedure due to patient preference.</label><br><br>

      
    
   <!-- <button onclick = "copytext()" id="copy">Copy</button><br>  -->
    
    <textarea id = "text" style = "width:  1000px; height: 200px;"></textarea><br>
    
    <div class="hasBeenCopied"></div>
    <button id="copyBtn" onclick="copyEdited()">Copy edited text</button><br>
    
    <footer>
      <div class="dateChanged">12/6/22</div>
      <div class="tested">Works</div>
      <div class = "meetsStandard1"></div>
     </footer>
                                               
                            
    
    <script>
      function copyEdited() {
        navigator.clipboard.writeText(document.getElementById("text").value); 
      }
    </script>
    
    <script>
      function copytext(){
        var indication = document.getElementById("indication").value;
        var anticoagulated = document.getElementById("anticoagulated").checked;
        var sedation = getRadioButtonValue("sedation");
        console.log(sedation);
        var t = "Procedure Note:  Electrical Cardioversion\n";
        t = t + "Electrical cardioversion was indicated due to "+indication+". ";
        t = t + "The risks, benefits and alternatives were explained to the patient who provided written consent for the procedure. ";
        if (anticoagulated == true){
            t = t + "The patient had been consistently taking anticoagulation for at least 3 weeks. ";
        }
        switch(sedation){
          case "1":
            console.log("in 1");
            t = t + "Conscious sedation was used for the procedure.  ";
            break;
          case "2":
            t = t + "Conscious sedation was not used for the procedure due to patient instability. ";
            break;
          case "3":
            t = t + "Conscious sedation was not used for the procedure due to patient preference. ";
            break;
        }
        t = t + "A shock of 200 J was administered with resulting cardioversion to a normal sinus rhythm.  ";
        t = t + "The patient tolerated the procedure well.  There were no complications."
        document.getElementById("text").value = t;
        navigator.clipboard.writeText(t);
      }
      
      function getRadioButtonValue(name){
        var ele = document.getElementsByName(name);
        for (let i = 0; i < ele.length; i++){
          if (ele[i].checked){
            return(ele[i].value);
          }
        }
        return(-1);
      }
    </script>
  </body>
</html>

<!--
    Procedure note:  Electrical cardioversion
    Electrical cardioversion was indicated due to atrial fibrillation with rapid ventricular response, unresponsive to medication.  The risks, benefits and alternatives were
    explained to the patient who provided written consent for the procedure.  The patient had been NPO for 8 hours.  The patient had been consistently taking anticoagulation
    for at least 3 weeks.  The patient was sedated with 10 mg of etomidate.  Once adequate sedation was obtained, a shock of 200 J was administered with resulting cardioversion
    to a normal sinus rhythm.  The patient tolerated the procedure well.  There were no complications.
    
    -->
