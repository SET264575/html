<html>
  <head>
    <title>Digital block</title>
    <link rel="stylesheet" href="procedure.css">
  </head>
  <body>
    <h3>Digital block</h3>

    <h4>Indication</h4>
    
    <input type = "radio" id = "indication1" name = "indication" value = "fracture reduction" onchange="copytext()">
    <label for = "indication1">Fracture reduction</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "reduction of joint dislocation" onchange="copytext()">
    <label for = "indication1">Reduction of dislocation</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "laceration repair" onchange="copytext()">
    <label for = "indication1">Laceration repair</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "nail removal" onchange="copytext()">
    <label for = "indication1">Nail removal</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "foreign body removal" onchange="copytext()">
    <label for = "indication1">Foreign body removal</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "abscess I&D" onchange="copytext()">
    <label for = "indication1">Abscess I&D</label><br>    
    <input type = "radio" id = "indication1" name = "indication" value = "nail trephination" onchange="copytext()">
    <label for = "indication1">Nail trephination</label><br>
    
    <h4>Side</h4>
    <input type = "radio" value = "left" name = "side" id = "radio1" onchange = "copytext()">
    <label id = "radio1">Left</label><br>
    <input type = "radio" value = "right" name = "side" id = "radio2" onchange = "copytext()">
    <label id = "radio2">Right</label><br>
    
     <h4>Digit Number</h4>
    <select id = "digitcount">
      <option value = "1st">1st</option>
      <option value = "2nd">2nd</option>
      <option value = "3rd">3rd</option>
      <option value = "4th">4th</option>
      <option value = "5th">5th</option>
    </select><br>
    
    <h4>Type of Digit</h4>
    <input type = "radio" value = "finger" id = "finger" name = "digit" onchange = "copytext()">
    <label for = "finger">Finger</label><br> 
    <input type = "radio" value = "toe" id = "toe" name = "digit" onchange = "copytext()">
    <label for = "toe">Toe</label><br><br>
    

    <label for="anesthetic">Anesthetic</label>
    <select id = "anesthetic" onchange="copytext()">
      <option>1% lidocaine</option>
      <option>1% lidocaine with epinephrine</option>
      <option>2% lidocaine</option>
      <option>2% lidocaine with epinephrine</option>
    </select><br><br>

    <label for="dose">Dose</label>
    <select id = "dose" onchange="copytext()">
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>10</option>
    </select><br>

<br>
    <input type = "checkbox" name = "aspiration" id = "aspiration"  onchange="copytext()">
    <label for = "aspiration">To avoid injecting into a blood vessel, aspiration was performed prior to injection.</label><br><br>

    <br>
 <div class="textarea">
    <textarea id = "text"></textarea><br>
            <br>
    <div class="hasBeenCopied"></div>
    
    <button class="copyBtn" id="copyBtn" onclick="copyEdited()"></button><br>
    </div>
    <footer>
      <div class="dateChanged">12/6/22</div>
      <div class="tested">Aspiration checkbox not functional</div>
      <div class="meetsStandard1"></div>
     </footer>
                                               
                            
    
    <script>
      function copyEdited() {
        navigator.clipboard.writeText(document.getElementById("text").value); 
      }
    </script>
  
    <script>
      function copytext(){
        var indication = getRadioButtonValue('indication');
        var anesthetic = document.getElementById("anesthetic").value;
        var dose = document.getElementById("dose").value;
        var side = document.getElementById("side").value;
        var digitcount = getRadioButtonValue("digitcount");
        var digit = getRadioButtonValue("digit");
        var location = side + " " + digitcount + " " + digit;
        var aspiration = document.getElementById("aspiration").value;
        var t = "Procedure Note: "+location+" Digital Block\n";
        t = t + "The risks, benefits, and alternatives were discussed with the patient who gave verbal consent. ";
        t = t +"The block was indicated for "+ indication+". ";
        t = t + "A total of " + dose + " cc of ";
        t = t + anesthetic;
        t = t + " was injected at the base of the digit. "
        t = t + "To avoid injecting into a blood vessel, aspiration was performed prior to injection. ";
        t = t + "The patient tolerated the procedure well.  Adequate anesthesia was obtained. There were no complications. ";
        navigator.clipboard.writeText(t);
        document.getElementById("text").value = t;
      }
      function getRadioButtonValue(name){
        var ele = document.getElementsByName(name);
        for (let i = 0; i < ele.length; i++){
          if (ele[i].checked){
            return(ele[i].value);
          }
        }
        return(-1);
      }
    </script>
  </body>
</html>
