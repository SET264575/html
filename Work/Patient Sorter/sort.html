<html>
  <head>
    <style>
      table, td, th {
        paddingx: 20px;
      }
    </style>
  </head>
  <body>
    <textarea id = "text" onchange="sortPt(this.value)" style="rows: 40; cols: 40"></textarea>
    <p id = "results"></p>
    <h4>Unassigned</h4>
    <p id = "unassigned"></p>
    <h4>Mine</h4>
    <p id = "mine"></p>
    
    
    <script>
      class Pt {
        constructor (c) {
          this.name = c[0];
          console.log(c[0]);
          this.age = c[1];
          this.room = c[3];
          this.complaint = c[4];
          this.rating = c[5];
          this.time = c[6];
          this.status = c[7];
          this.provider = c[8];
        }
      }
      
      function sortPt(t) {
        a = t.split('\n')
        
/*        example = "
        550
 
Sam G Sparks, MD
Wilson Hospital Center
Find Patient
My List
ED Main
Global ED
Waiting Room
More Lists
WHITE,BILL 
25 M 
ED Main 
ED02 
Motor Vehicle Crash 
(4) Less Urgent 
1h 57m 
Ready for Discharge 
Sparks,S
 
Jen H
PINK,MARK 
300 F 
ED Main 
ED03 
Abdominal Pain 
(3) Urgent 
1h 53m 
With Doctor 
Washington,K
 
Jen H
BLANK,YUKI 
750 M 
ED Main 
ED05 
Hypotension 
(1) Resuscitation 
1h 49m 
In Room 
Washington,K
        
Jen H        " 
*/

        count = a.length/11-1;
        pts = [];
        b = [];
  for (i =0; i < count; i++) {
    b[i] = a.slice((i+1)*11-1,10+(i+2)*11-1);
    pts.push(new Pt(b[i]));
  }

        document.getElementById("results").innerHTML = sorttable(pts,"All");
        document.getElementById("unassigned").innerHTML = sorttable(pts,"Unassigned");
        document.getElementById("mine").innerHTML = sorttable(pts,"Steven Scott, MD")
      }
      
      function sorttable(p,provider) {
        p.sort(function(a,b) {return a.time - b.time});
        t = "<table>";
        t = t + "<tr><th>Name</th><th>Time</th><th>Room</th><th>Status</th><th>Rating</th></tr>"
        for (i = 0; i<pts.length;i++) {
          if ((p[i].provider == provider) || (provider == "All")) {
            t = t + "<tr><td>"+p[i].name +"</td><td>"+ p[i].time + "</td><td>"+ p[i].room + "</td><td>"+ p[i].status + "</td><td>"+ p[i].rating+"</td></tr>";
          }
        }
        t=t+"</table>";
        return(t);
      }
    </script>
  </body>
</html>
      
